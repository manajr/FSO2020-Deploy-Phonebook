(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,t,n){e.exports=n(39)},20:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(14),u=n.n(c),o=(n(20),n(4)),i=n(2),l=function(e){var t=e.newItem,n=e.handleChange,a=e.text;return r.a.createElement("div",null,a," ",r.a.createElement("input",{value:t,onChange:n}))},m=n(3),d=n.n(m),f="/api/persons",s=function(){return d.a.get(f).then((function(e){return e.data}))},h=function(e){return d.a.post(f,e).then((function(e){return e.data}))},b=function(e,t){return d.a.put("".concat(f,"/").concat(e),t).then((function(e){return e.data}))},v=function(e){return d.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))},E=function(e){var t=e.item,n=e.tracker,a=e.state,c=function(e){var r;e.preventDefault();var c=t.filter((function(t){return t.id.toString()===e.target.id}));window.confirm("Delete ".concat(null===(r=c[0])||void 0===r?void 0:r.name," "))&&(n(e.target.id),v(e.target.id).catch((function(e){var t;a("Information of ".concat(null===(t=c[0])||void 0===t?void 0:t.name," has already been removed from server")),setTimeout((function(){a(null)}),5e3)})))};return r.a.createElement("div",null,t.map((function(e){return r.a.createElement("div",{key:e.name},r.a.createElement("form",null,e.name," ",e.number,r.a.createElement("button",{id:e.id,type:"submit",onClick:c},"delete")))})))},g=function(e){var t=e.newSearch,n=e.handleChange;return r.a.createElement("div",null,"filter shown with: ",r.a.createElement("input",{value:t,onChange:n}))};n(38);var p=function(e){var t=e.message;return null===t?null:t.includes("Information of")?r.a.createElement("div",{className:"message__error"},t):r.a.createElement("div",{className:"message__success"},t)},w=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)([]),m=Object(i.a)(u,2),d=m[0],f=m[1],v=Object(a.useState)(""),w=Object(i.a)(v,2),j=w[0],O=w[1],S=Object(a.useState)(""),k=Object(i.a)(S,2),C=k[0],y=k[1],I=Object(a.useState)(""),x=Object(i.a)(I,2),_=x[0],D=x[1],N=Object(a.useState)(""),J=Object(i.a)(N,2),L=J[0],T=J[1],A=Object(a.useState)(null),B=Object(i.a)(A,2),M=B[0],P=B[1];Object(a.useEffect)((function(){s().then((function(e){c(e)}))}),[]);var q=_.length>1?n.filter((function(e){return e.name.includes(_)})):n;return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(p,{message:M}),r.a.createElement(g,{newSearch:L,handleChange:function(e){T(e.target.value)}}),r.a.createElement("h2",null,"add a new"),r.a.createElement(l,{newItem:j,handleChange:function(e){O(e.target.value)},text:"name:"}),r.a.createElement(l,{newItem:C,handleChange:function(e){y(e.target.value)},text:"number:"}),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t={name:j,number:C},a=n.filter((function(e){return e.name===j}));if(0!==(null===a||void 0===a?void 0:a.length))if(""!==C){if(window.confirm("".concat(j," is already added to phonebook,\n         replace the old number with a new one?"))){var r=Object(o.a)(Object(o.a)({},a[0]),{},{number:C});b(a[0].id,r).then((function(e){c(n.map((function(t){return t.id!==a[0].id?t:e})))}))}}else window.alert("".concat(j," already exist in the list"));else""===j?(D(L),T(""),f(d.concat(n.filter((function(e){return e.name.toLowerCase().includes(_.toLowerCase())}))))):h(t).then((function(e){P("Added ".concat(e.name)),setTimeout((function(){return P(null)}),5e3),c(n.concat(e)),O(""),y("")}))}},r.a.createElement("button",{type:"submit"},"add")),r.a.createElement("h2",null,"Numbers"),r.a.createElement(E,{item:q,tracker:function(e){c(n.filter((function(t){return t.id.toString()!==e})))},state:P}))};u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.ab0524b3.chunk.js.map