{"version":3,"sources":["Components/PersonForm.js","Components/Person.js","Components/Filter.js","services/persons.js","Components/Notification.js","App.js","index.js"],"names":["PersonForm","props","newItem","handleChange","text","value","onChange","Person","item","clickDeleteHandler","map","data","key","name","number","id","type","onClick","Filter","newSearch","baseUrl","axios","get","then","response","newObject","post","put","delete","Notification","message","includes","className","App","useState","personGroup","setPersonGroup","newName","setNewName","newNumber","setNewNumber","setNewSearch","errorMessage","setErrorMessage","useEffect","personService","initialPersons","createInDB","newPerson","returnedPerson","setTimeout","concat","catch","error","console","log","personFilter","length","filter","person","toLowerCase","createNewPerson","identifyPerson","checkIfNewPersonInGroup","showWindowMessage","condition","window","confirm","alert","personUpdateNumber","changedPersonNumber","returnedUpdatedPerson","event","target","onSubmit","preventDefault","newNumberNotVOID","newNameVOID","checkForUpdate","nameFiltered","n","toString","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1caef35b.chunk.js","sourcesContent":["import React from 'react'\n\nconst PersonForm = (props) => {\n    const {newItem, handleChange, text} = props\n    return(\n        <div>\n          {text} <input \n          value={newItem}\n          onChange={handleChange}\n          />\n        </div>\n    )\n}\n\nexport default PersonForm\n","import React from 'react'\n\nconst Person = ({item, clickDeleteHandler}) =>{\n    return(\n    <div>\n    {item.map(data =>\n        <div key={data.name}>\n            <form>\n                {data.name} {data.number} \n                 <button id={data.id} type='submit' onClick={clickDeleteHandler}>delete</button> \n            </form>\n        </div>)}\n    </div>\n    )\n}\n\nexport default Person","import React from 'react'\n\nconst Filter = (props) => {\n    const {newSearch, handleChange} = props\n    return(\n        <div>\n            filter shown with: <input \n            value={newSearch}\n            onChange={handleChange}\n            />\n        </div>\n    )\n}\n\n\nexport default Filter","import axios from 'axios'\n\nconst baseUrl = '/api/persons'\n//const baseUrl = 'http://localhost:3002/persons'\n\nconst getAllPersons = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n  }\n  \n  const create = newObject => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n  }\n  \n  const update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then(response => response.data)\n  }\n\n  const deletePerson = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.data)\n  }\n\nexport default {getAllPersons, create, update, deletePerson}\n","import React from 'react'\nimport './Notification.css'\n\nfunction Notification({message}) {\n    if (message === null){\n        return null\n    }\n    else if(message.includes('Information of') || message.includes('Person validation')){\n        return(\n            <div className='message__error'>\n                {message}\n            </div>\n        )\n    }\n    return (\n        <div className='message__success'>\n            {message}\n        </div>\n    )\n}\n\nexport default Notification\n","import React, { useState, useEffect } from 'react'\nimport PersonForm from './Components/PersonForm'\nimport Person from './Components/Person'\nimport Filter from './Components/Filter'\nimport personService from './services/persons'\nimport Notification from './Components/Notification'\n\nconst App = () => {\n\n  const [ personGroup, setPersonGroup ] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber] = useState('')\n  const [ newSearch, setNewSearch ] = useState('')\n  const [ errorMessage, setErrorMessage ] = useState(null)\n\n  useEffect(() => {\n    personService\n      .getAllPersons()\n      .then(initialPersons => {\n        setPersonGroup(initialPersons)\n      })\n  }, [])\n\n  const addPerson = (event) => {\n    event.preventDefault()\n\n    const WITHOUT_ENTRY = '';\n    const newPerson = createNewPerson();\n    const newNumberNotVOID = newNumber !== WITHOUT_ENTRY;\n    const newNameVOID = newName === WITHOUT_ENTRY;\n\n    const newPersonExist = checkIfNewPersonInGroup()\n\n    if(newPersonExist){\n      const checkForUpdate = showWindowMessage(newNumberNotVOID)\n      personUpdateNumber(checkForUpdate)\n    } else{\n      if (newNameVOID){\n      } else{\n        createInDB(newPerson);\n      }\n    }\n  }\n\n  const createInDB = (newPerson) => (\n    personService.create(newPerson)\n    .then(returnedPerson => {\n      setErrorMessage(`Added ${returnedPerson.name}`)\n      setTimeout(() => setErrorMessage(null), 5000)\n      setPersonGroup(personGroup.concat(returnedPerson))\n      setNewName('')\n      setNewNumber('')\n    })\n    .catch(error =>{\n      console.log(error.response?.data)\n      setErrorMessage(`Person validation failed: name ${newPerson.name} is shorter than the minimum allowed length (3).`)\n      setTimeout(() => setErrorMessage(null), 5000)\n      setNewName('')\n      setNewNumber('')\n    })\n    );\n\n  const personFilter =  newSearch.length > 1 ?\n    personGroup.filter(person=>\n      person.name.toLowerCase().includes(newSearch.toLowerCase())) :\n      personGroup;\n \n  const trackerPerson = (id) => {\n    setPersonGroup(personGroup.filter(person => person.id.toString() !== id))\n  }\n\n\n\n  const whenClickDelete = (event) => {\n    event.preventDefault()\n\n    const nameFiltered = personFilter.filter(n=>\n        n.id.toString() === event.target.id)\n    const deleteConf = window.confirm(`Delete ${nameFiltered[0]?.name} `)        \n\n    if(deleteConf) {\n        trackerPerson(event.target.id)\n    \n        personService\n        .deletePerson(event.target.id)\n        .then(error=>{\n            setErrorMessage(`Information of ${nameFiltered[0]?.name} has already been removed from server`)\n            setTimeout(()=> {\n                setErrorMessage(null)\n            },5000)\n        })\n    }\n}\n\n  const createNewPerson = () => {\n    const newPerson = {\n      name: newName,\n      number: newNumber\n    }\n    return(newPerson)\n  }\n\n  const identifyPerson = () => (personGroup.filter(person =>\n    person.name === newName)\n )\n\n  const checkIfNewPersonInGroup = () => {\n    const VOID_LIST = 0;\n    const isPersonInGroup = identifyPerson().length !== VOID_LIST;\n    return (isPersonInGroup)\n  }\n\n  const showWindowMessage = (condition) => {\n    if (condition) {\n      const havePerson = window.confirm(`${newName} is already added to phonebook,\n      replace the old number with a new one?`)\n      return havePerson\n    }\n    const havePerson = window.alert(`${newName} already exist in the list`)\n    return false\n  }\n\n  const personUpdateNumber = (condition) => {\n    if (condition){\n      const changedPersonNumber = {...identifyPerson()[0], number:newNumber}\n\n      personService\n      .update(identifyPerson()[0].id, changedPersonNumber)\n      .then(returnedUpdatedPerson => {\n        setPersonGroup(personGroup.map(person =>person.id !== identifyPerson()[0].id ?\n        person : returnedUpdatedPerson))\n      })\n    }\n  }\n\n  const handlePersonChange = (event) => {\n    setNewName(event.target.value)\n  }\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n  const handlePersonSearch = (event) => {\n    setNewSearch(event.target.value)\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={errorMessage} />\n      <Filter newSearch={newSearch} handleChange={handlePersonSearch}/>\n      <h2>add a new</h2>\n          <PersonForm newItem={newName}\n          handleChange={handlePersonChange} text={'name:'}/>\n          <PersonForm newItem={newNumber} \n          handleChange={handleNumberChange} text={'number:'} />\n          \n        <form onSubmit={addPerson}> \n          <button type=\"submit\">add</button>\n        </form>\n        \n        <h2>Numbers</h2>\n          <Person item={personFilter} clickDeleteHandler={whenClickDelete} />\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n"],"sourceRoot":""}